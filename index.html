<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulder Shambhala Center MSR Thangka Survey</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .survey-header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .survey-title {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .survey-description {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #007bff;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        
        .form-container.completed {
            opacity: 0.7;
            background-color: #f8f9fa;
        }
        
        .vajradhara { border-left: 5px solid #8B4513; }
        .amitabha { border-left: 5px solid #DC143C; }
        .rigden { border-left: 5px solid #4169E1; }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 3px;
            font-size: 28px;
        }
        
        .image-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .image-container {
            width: 800px;
            height: 600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fafafa;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #ddd;
        }
        
        .image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .rating-section {
            margin-bottom: 30px;
        }
        
        .rating-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 400;
            text-align: center;
        }
        
        .rating-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .rating-option {
            text-align: center;
        }
        
        .rating-option input[type="radio"] {
            display: none;
        }
        
        .rating-option label {
            display: block;
            width: 50px;
            height: 50px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            color: #666;
        }
        
        .rating-option input[type="radio"]:checked + label {
            background-color: #007bff;
            border-color: #007bff;
            color: white;
            transform: scale(1.1);
        }
        
        .rating-option label:hover {
            border-color: #007bff;
            background-color: #f0f8ff;
        }
        
        .rating-description {
            text-align: center;
            margin-top: 10px;
            color: #666;
            font-size: 14px;
        }
        
        .feedback-section {
            margin-bottom: 30px;
        }
        
        .feedback-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: 400;
            text-align: center;
        }
        
        .feedback-textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            box-sizing: border-box;
        }
        
        .feedback-textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .submit-section {
            text-align: center;
        }
        
        .submit-btn {
            padding: 15px 40px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #218838;
        }
        
        .submit-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .final-submit {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
            border: 3px solid #dc3545;
            animation: fadeInPulse 1s ease-in-out;
        }
        
        .final-submit.show {
            display: block;
        }
        
        @keyframes fadeInPulse {
            0% { 
                opacity: 0; 
                transform: scale(0.95);
                border-color: #dc3545;
            }
            50% { 
                opacity: 0.8; 
                transform: scale(1.02);
                border-color: #ffc107;
                box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
            }
            100% { 
                opacity: 1; 
                transform: scale(1);
                border-color: #dc3545;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
        }
        
        .final-submit-btn {
            padding: 20px 60px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .final-submit-btn:hover:not(:disabled) {
            background-color: #c82333;
        }
        
        .final-submit-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .completion-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .status-pending {
            background-color: #ffc107;
            color: #856404;
        }
        
        .status-completed {
            background-color: #28a745;
            color: white;
        }
        
        .thank-you-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            text-align: center;
            display: none;
            margin-top: 20px;
        }
        
        .thank-you-page.show {
            display: block;
        }
        
        .thank-you-title {
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 300;
        }
        
        .thank-you-subtitle {
            font-size: 24px;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        
        .thank-you-message {
            font-size: 18px;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .submission-id {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin: 30px auto;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .submission-id h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .submission-code {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            font-weight: 500;
            min-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.error {
            background-color: #dc3545;
        }
        
        .toast.celebration {
            background-color: #7b68ee;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="survey-header" id="surveyHeader">
        <h1 class="survey-title">Boulder Shambhala Center MSR Thangka Survey</h1>
        <p class="survey-description">Please rate each of the three thangkas below on a scale from 0 (Neutral) to 5 (Most Preferable)</p>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <p id="progressText">Progress: 0 of 3 completed</p>
    </div>

    <!-- VAJRADHARA Form -->
    <div class="form-container vajradhara" id="vajradharaContainer">
        <h1>V A J R A D H A R A <span class="completion-status status-pending" id="vajradharaStatus">Pending</span></h1>
        
        <div style="text-align: center; margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-style: italic; color: #555;">
            This 6'x6' thangka was commissioned by Chögyam Trungpa Rinpoche in 1979 and blessed by both the Vidyadhara and the 16th Karmapa. It served as the main shrine image for 30 years, supporting Kagyu ngöndro practice and countless teachings. Returning it would welcome back traditional Buddhist practitioners and visiting teachers while honoring our Kagyu vajrayana heritage alongside Shambhala practices.
        </div>
        
        <form id="vajradharaForm">
            <div class="image-section">
                <div class="image-container">
                    <img src="vajradhara.png" alt="VAJRADHARA thangka" style="max-width: 100%; height: auto;">
                </div>
            </div>
            
            <div class="rating-section">
                <h2>Rate VAJRADHARA</h2>
                <div class="rating-grid">
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-0" name="vajradhara-rating" value="0">
                        <label for="vajradhara-rating-0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-1" name="vajradhara-rating" value="1">
                        <label for="vajradhara-rating-1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-2" name="vajradhara-rating" value="2">
                        <label for="vajradhara-rating-2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-3" name="vajradhara-rating" value="3">
                        <label for="vajradhara-rating-3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-4" name="vajradhara-rating" value="4">
                        <label for="vajradhara-rating-4">4</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-5" name="vajradhara-rating" value="5">
                        <label for="vajradhara-rating-5">5</label>
                    </div>
                </div>
                <div class="rating-description">
                    0 (Neutral) to 5 (Most Preferable)
                </div>
            </div>
            
            <div class="feedback-section">
                <h2>Feedback</h2>
                <textarea 
                    class="feedback-textarea" 
                    name="vajradhara-feedback"
                    placeholder="Optional: Share your thoughts about this thangka..."
                    rows="5"
                ></textarea>
            </div>
            
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit VAJRADHARA Rating</button>
            </div>
        </form>
    </div>

    <!-- AMITABHA Form -->
    <div class="form-container amitabha" id="amitabhaContainer">
        <h1>A M I T A B H A <span class="completion-status status-pending" id="amitabhaStatus">Pending</span></h1>
        
        <div style="text-align: center; margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-style: italic; color: #555;">
            Shakyamuni Buddha (pictured: Amitabha) represents the enlightened mind and the universal possibility of achieving enlightenment. As a familiar and welcoming image to all Buddhist traditions worldwide, it would serve as an inclusive focal point for meditation and devotion. This choice honors the Vidyadhara's vision of maintaining both Buddhist and Shambhala teachings, creating a bridge for diverse practitioners visiting BSC.
        </div>
        
        <form id="amitabhaForm">
            <div class="image-section">
                <div class="image-container">
                    <img src="amitabha.png" alt="AMITABHA thangka" style="max-width: 100%; height: auto;">
                </div>
            </div>
            
            <div class="rating-section">
                <h2>Rate AMITABHA</h2>
                <div class="rating-grid">
                    <div class="rating-option">
                        <input type="radio" id="amitabha-rating-0" name="amitabha-rating" value="0">
                        <label for="amitabha-rating-0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="amitabha-rating-1" name="amitabha-rating" value="1">
                        <label for="amitabha-rating-1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="amitabha-rating-2" name="amitabha-rating" value="2">
                        <label for="amitabha-rating-2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="amitabha-rating-3" name="amitabha-rating" value="3">
                        <label for="amitabha-rating-3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="amitabha-rating-4" name="amitabha-rating" value="4">
                        <label for="amitabha-rating-4">4</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="amitabha-rating-5" name="amitabha-rating" value="5">
                        <label for="amitabha-rating-5">5</label>
                    </div>
                </div>
                <div class="rating-description">
                    0 (Neutral) to 5 (Most Preferable)
                </div>
            </div>
            
            <div class="feedback-section">
                <h2>Feedback</h2>
                <textarea 
                    class="feedback-textarea" 
                    name="amitabha-feedback"
                    placeholder="Optional: Share your thoughts about this thangka..."
                    rows="5"
                ></textarea>
            </div>
            
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit AMITABHA Rating</button>
            </div>
        </form>
    </div>

    <!-- PRIMORDIAL RIGDEN Form -->
    <div class="form-container rigden" id="rigdenContainer">
        <h1>P R I M O R D I A L &nbsp; R I G D E N <span class="completion-status status-pending" id="rigdenStatus">Pending</span></h1>
        
        <div style="text-align: center; margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px; font-style: italic; color: #555;">
            The Primordial Rigden embodies inherent basic goodness, combining Buddhist and Shambhala teachings. This thangka connects us to the global Shambhala community and represents our unique heritage from Chögyam Trungpa Rinpoche. Despite complex community history, it symbolizes our path of taking obstacles as the way forward, inviting healing and transformation while maintaining our identity as a Shambhala practice center.
        </div>
        
        <form id="primordialRigdenForm">
            <div class="image-section">
                <div class="image-container">
                    <img src="primordialRigden.png" alt="PRIMORDIAL RIGDEN thangka" style="max-width: 100%; height: auto;">
                </div>
            </div>
            
            <div class="rating-section">
                <h2>Rate PRIMORDIAL RIGDEN</h2>
                <div class="rating-grid">
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-0" name="rigden-rating" value="0">
                        <label for="primordialRigden-rating-0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-1" name="rigden-rating" value="1">
                        <label for="primordialRigden-rating-1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-2" name="rigden-rating" value="2">
                        <label for="primordialRigden-rating-2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-3" name="rigden-rating" value="3">
                        <label for="primordialRigden-rating-3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-4" name="rigden-rating" value="4">
                        <label for="primordialRigden-rating-4">4</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-5" name="rigden-rating" value="5">
                        <label for="primordialRigden-rating-5">5</label>
                    </div>
                </div>
                <div class="rating-description">
                    0 (Neutral) to 5 (Most Preferable)
                </div>
            </div>
            
            <div class="feedback-section">
                <h2>Feedback</h2>
                <textarea 
                    class="feedback-textarea" 
                    name="rigden-feedback"
                    placeholder="Optional: Share your thoughts about this thangka..."
                    rows="5"
                ></textarea>
            </div>
            
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit PRIMORDIAL RIGDEN Rating</button>
            </div>
        </form>
    </div>

    <!-- Final Submit Section -->
    <div class="final-submit" id="finalSubmitSection">
        <h2>Complete Your Survey</h2>
        <p>You have completed all three ratings. Click below to submit your complete survey.</p>
        <button type="button" class="final-submit-btn" id="finalSubmitBtn">Submit Complete Survey</button>
    </div>

    <!-- Thank You Page -->
    <div class="thank-you-page" id="thankYouPage">
        <h1 class="thank-you-title">✨ Thank You! ✨</h1>
        <p class="thank-you-subtitle">Your feedback has been successfully submitted</p>
        
        <div class="thank-you-message">
            <p>Your responses to the Boulder Shambhala Center MSR Thangka Survey have been recorded. Your feedback is valuable and will help inform important decisions about our meditation space.</p>
            <p style="margin-top: 30px;"><em>You may now close this page.</em></p>
        </div>
    </div>

    <script>
        let completedForms = 0;
        const totalForms = 3;
        const surveyData = {};
        
        // Generate unique submission ID
        function generateSubmissionID() {
            const timestamp = Date.now().toString(36);
            const randomStr = Math.random().toString(36).substring(2, 8);
            return `TSR-${timestamp}-${randomStr}`.toUpperCase();
        }
        
        // Store submission data
        function storeSubmissionData(submissionId, data) {
            const submissionData = {
                id: submissionId,
                timestamp: new Date().toISOString(),
                responses: data
            };
            
            // Get existing submissions
            const allSubmissions = JSON.parse(localStorage.getItem('all_thangka_submissions') || '[]');
            allSubmissions.push(submissionData);
            localStorage.setItem('all_thangka_submissions', JSON.stringify(allSubmissions));
            
            console.log('Submission stored:', submissionData);
            return submissionData;
        }

        // Toast notification
        function showToast(message, type = 'success') {
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span style="margin-right: 10px;">${type === 'error' ? '❌' : '✅'}</span>${message}`;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
        });

        function setupEventListeners() {
            // Individual form submissions
            document.getElementById('vajradharaForm').addEventListener('submit', function(e) {
                handleFormSubmit(e, 'VAJRADHARA', 'vajradhara');
            });
            
            document.getElementById('amitabhaForm').addEventListener('submit', function(e) {
                handleFormSubmit(e, 'AMITABHA', 'amitabha');
            });
            
            document.getElementById('primordialRigdenForm').addEventListener('submit', function(e) {
                handleFormSubmit(e, 'PRIMORDIAL RIGDEN', 'rigden');
            });

            // Final submission
            document.getElementById('finalSubmitBtn').addEventListener('click', handleFinalSubmit);
        }

        function handleFormSubmit(e, formName, formId) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const rating = formData.get(formId + '-rating');
            const feedback = formData.get(formId + '-feedback') || 'No feedback provided';
            
            if (!rating) {
                showToast(`Please select a rating for ${formName}`, 'error');
                return;
            }
            
            // Store the data
            surveyData[formId] = {
                name: formName,
                rating: rating,
                feedback: feedback
            };
            
            // Mark form as completed
            markFormCompleted(formId);
            
            // Show success message
            showToast(`${formName} rating submitted!`);
            
            // Update progress
            updateProgress();
        }

        function markFormCompleted(formId) {
            const container = document.getElementById(formId + 'Container');
            const status = document.getElementById(formId + 'Status');
            
            if (!container || !status) {
                console.error('Could not find elements for:', formId);
                return;
            }
            
            const submitBtn = container.querySelector('.submit-btn');
            
            if (!submitBtn) {
                console.error('Could not find submit button for:', formId);
                return;
            }
            
            container.classList.add('completed');
            status.textContent = 'Completed';
            status.className = 'completion-status status-completed';
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitted ✓';
            
            completedForms++;
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const percentage = (completedForms / totalForms) * 100;
            
            progressFill.style.width = percentage + '%';
            progressText.textContent = `Progress: ${completedForms} of ${totalForms} completed`;
            
            if (completedForms === totalForms) {
                document.getElementById('finalSubmitSection').classList.add('show');
                setTimeout(() => {
                    showToast('All ratings complete! Ready for final submission.', 'celebration');
                }, 500);
            }
        }

        function handleFinalSubmit() {
            if (completedForms !== totalForms) {
                showToast('Please complete all three ratings first.', 'error');
                return;
            }
            
            // Disable the final submit button
            const finalBtn = document.getElementById('finalSubmitBtn');
            finalBtn.disabled = true;
            finalBtn.textContent = 'Submitting...';
            
            // Generate submission ID
            const submissionId = generateSubmissionID();
            
            // Store the complete submission
            storeSubmissionData(submissionId, surveyData);
            
            // Hide all survey content
            document.getElementById('surveyHeader').classList.add('hidden');
            document.getElementById('vajradharaContainer').classList.add('hidden');
            document.getElementById('amitabhaContainer').classList.add('hidden');
            document.getElementById('rigdenContainer').classList.add('hidden');
            document.getElementById('finalSubmitSection').classList.add('hidden');
            
            // Show thank you page
            document.getElementById('thankYouPage').classList.add('show');
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            console.log('Survey completed! Data:', surveyData);
        }
    </script>
</body>
</html>