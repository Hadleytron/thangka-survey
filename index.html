<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulder Shambhala Center MSR Thangka Survey</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .survey-header {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .survey-title {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: 2px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: #007bff;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        
        .form-container.completed {
            opacity: 0.7;
            background-color: #f8f9fa;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 3px;
            font-size: 28px;
        }
        
        .image-section {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .image-container {
            width: 800px;
            height: 600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fafafa;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #ddd;
        }
        
        .image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .rating-section {
            margin-bottom: 30px;
        }
        
        .rating-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: 400;
            text-align: center;
        }
        
        .rating-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .rating-option {
            text-align: center;
        }
        
        .rating-option input[type="radio"] {
            display: none;
        }
        
        .rating-option label {
            display: block;
            width: 50px;
            height: 50px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            color: #666;
        }
        
        .rating-option input[type="radio"]:checked + label {
            background-color: #007bff;
            border-color: #007bff;
            color: white;
            transform: scale(1.1);
        }
        
        .rating-option label:hover {
            border-color: #007bff;
            background-color: #f0f8ff;
        }
        
        .rating-description {
            text-align: center;
            margin-top: 10px;
            color: #666;
            font-size: 14px;
        }
        
        .feedback-section {
            margin-bottom: 30px;
        }
        
        .feedback-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: 400;
            text-align: center;
        }
        
        .feedback-textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            box-sizing: border-box;
        }
        
        .feedback-textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .submit-section {
            text-align: center;
        }
        
        .submit-btn {
            padding: 15px 40px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #218838;
        }
        
        .submit-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .contact-info-section {
            background: linear-gradient(135deg, #e8f5e8 0%, #f0f8f0 100%);
            border: 2px solid #28a745;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.15);
        }
        
        .contact-info-section h2 {
            color: #1e7e34;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .contact-info-section p {
            text-align: center;
            color: #495057;
            margin-bottom: 25px;
            font-size: 16px;
            line-height: 1.5;
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .contact-field label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        
        .contact-field input {
            width: 100%;
            padding: 10px;
            border: 2px solid #28a745;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }
        
        .contact-field input:focus {
            outline: none;
            border-color: #1e7e34;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
        }
        
        .final-submit {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            display: none;
            border: 3px solid #dc3545;
            animation: fadeInPulse 1s ease-in-out;
        }
        
        .final-submit.show {
            display: block;
        }
        
        @keyframes fadeInPulse {
            0% { 
                opacity: 0; 
                transform: scale(0.95);
                border-color: #dc3545;
            }
            50% { 
                opacity: 0.8; 
                transform: scale(1.02);
                border-color: #ffc107;
                box-shadow: 0 8px 25px rgba(220, 53, 69, 0.3);
            }
            100% { 
                opacity: 1; 
                transform: scale(1);
                border-color: #dc3545;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            }
        }
        
        .final-submit-btn {
            padding: 20px 60px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .final-submit-btn:hover:not(:disabled) {
            background-color: #c82333;
        }
        
        .final-submit-btn:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        
        .completion-status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .status-completed {
            background-color: #28a745;
            color: white;
        }
        
        .thank-you-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 60px 40px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            text-align: center;
            display: none;
            margin-top: 20px;
        }
        
        .thank-you-page.show {
            display: block;
        }
        
        .thank-you-title {
            font-size: 48px;
            margin-bottom: 20px;
            font-weight: 300;
        }
        
        .thank-you-subtitle {
            font-size: 24px;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        
        .thank-you-message {
            font-size: 18px;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
            opacity: 0.9;
        }
        
        .submission-id {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin: 30px auto;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .submission-id h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .submission-code {
            font-family: 'Courier New', monospace;
            font-size: 24px;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            font-weight: 500;
            min-width: 300px;
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.error {
            background-color: #dc3545;
        }
        
        .toast.celebration {
            background-color: #7b68ee;
        }
        
        .hidden {
            display: none !important;
        }
        
        .instructions-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border: 2px solid #2196f3;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            box-shadow: 0 4px 12px rgba(33, 150, 243, 0.15);
        }
        
        .instructions-box h2 {
            color: #1976d2;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .instructions-box ol {
            color: #333;
            font-size: 16px;
            line-height: 1.6;
            margin: 0;
            padding-left: 20px;
        }
        
        .instructions-box li {
            margin-bottom: 12px;
            font-weight: 500;
        }
        
        .instructions-box li:last-child {
            margin-bottom: 0;
        }
        
        .read-more-link {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .read-more-link a {
            color: #007bff;
            text-decoration: underline;
            font-size: 16px;
            cursor: pointer;
            font-weight: 600;
            padding: 8px 16px;
            border: 2px solid #007bff;
            border-radius: 6px;
            background-color: #f8f9ff;
            display: inline-block;
            transition: all 0.3s ease;
        }
        
        .read-more-link a:hover {
            color: white;
            background-color: #007bff;
            text-decoration: none;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            animation: fadeIn 0.3s ease;
        }
        
        .modal.show {
            display: block;
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            animation: slideIn 0.3s ease;
        }
        
        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        
        .modal-close:hover {
            opacity: 1;
        }
        
        .modal-body {
            padding: 30px;
            overflow-y: auto;
            flex: 1;
            line-height: 1.6;
        }
        
        .modal-body h3 {
            color: #333;
            font-size: 20px;
            font-weight: 600;
            margin: 25px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #e9ecef;
        }
        
        .modal-body h3:first-child {
            margin-top: 0;
        }
        
        .modal-body p {
            color: #555;
            margin-bottom: 15px;
            text-align: justify;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-50px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .comparison-chart {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin: 0 -50px 30px -50px;
            overflow-x: auto;
            width: calc(100% + 100px);
        }
        
        .chart-title {
            text-align: center;
            font-size: 24px;
            color: #333;
            margin-bottom: 25px;
            font-weight: 400;
            letter-spacing: 1px;
        }
        
        .thangka-header-cell {
            text-align: center;
            position: relative;
        }
        
        .thangka-mini-image {
            width: 60px;
            height: 45px;
            object-fit: cover;
            border-radius: 4px;
            margin: 0 auto 8px auto;
            display: block;
            border: 2px solid #ddd;
        }
        
        .thangka-name {
            font-weight: 600;
            color: #333;
            font-size: 13px;
            text-align: center;
        }
        
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            line-height: 1.4;
        }
        
        .comparison-table th {
            background-color: #f8f9fa;
            padding: 15px 10px;
            text-align: center;
            font-weight: 600;
            border-bottom: 2px solid #dee2e6;
            color: #495057;
            vertical-align: top;
        }
        
        .comparison-table td {
            padding: 12px 10px;
            border-bottom: 1px solid #dee2e6;
            vertical-align: top;
        }
        
        .comparison-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .question-cell {
            font-weight: 500;
            background-color: #f1f3f4 !important;
            color: #333;
            width: 25%;
            text-align: left !important;
        }
        
        @media (max-width: 768px) {
            .comparison-chart {
                padding: 15px;
                margin: 0 -10px 30px -10px;
            }
            
            .comparison-table {
                font-size: 12px;
            }
            
            .comparison-table th,
            .comparison-table td {
                padding: 8px 6px;
            }
            
            .contact-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="survey-header" id="surveyHeader">
        <h1 class="survey-title">Boulder Shambhala Center MSR Thangka Survey</h1>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>

    <!-- Instructions Section -->
    <div class="instructions-box">
        <h2>How to Complete This Survey</h2>
        <ol>
            <li>Make sure to scroll down to the end to see each thangka image with rating options</li>
            <li>For each thangka, click a number from 0-5 to rate your preference</li>
            <li>Add optional comments in the text box</li>
            <li>Click the green "Submit" button for each thangka</li>
            <li>Provide your contact information at the bottom</li>
            <li>Complete the final submission when all three are rated</li>
        </ol>
        <div style="text-align: center; margin-top: 20px;">
            <a onclick="openModal('preamble')" style="color: #007bff; text-decoration: underline; font-size: 16px; cursor: pointer; font-weight: 600; padding: 8px 16px; border: 2px solid #007bff; border-radius: 6px; background-color: #f8f9ff; display: inline-block; transition: all 0.3s ease;" onmouseover="this.style.color='white'; this.style.backgroundColor='#007bff'; this.style.textDecoration='none'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 2px 8px rgba(0, 123, 255, 0.3)';" onmouseout="this.style.color='#007bff'; this.style.backgroundColor='#f8f9ff'; this.style.textDecoration='underline'; this.style.transform='translateY(0)'; this.style.boxShadow='none';">Read about the background and process for this survey</a>
        </div>
    </div>

    <!-- Comparison Chart -->
    <div class="comparison-chart">
        <h2 class="chart-title">Quick Comparison Overview</h2>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th class="question-cell"></th>
                    <th class="primordial-rigden-col thangka-header-cell">
                        <img src="primordialRigden.png" alt="Primordial Rigden" class="thangka-mini-image">
                        <div class="thangka-name">Primordial Rigden</div>
                    </th>
                    <th class="vajradhara-col thangka-header-cell">
                        <img src="vajradhara.png" alt="Vajradhara" class="thangka-mini-image">
                        <div class="thangka-name">Vajradhara</div>
                    </th>
                    <th class="shakyamuni-col thangka-header-cell">
                        <img src="shakyamuni-buddha.png" alt="Shakyamuni" class="thangka-mini-image">
                        <div class="thangka-name">Shakyamuni Buddha</div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="question-cell"><strong>Who first introduced this thangka to our sangha and when?</strong></td>
                    <td class="primordial-rigden-col">Sakyong Mipham Rinpoche in 2010</td>
                    <td class="vajradhara-col">Chogyam Trungpa Rinpoche in 1979</td>
                    <td class="shakyamuni-col">Over 2,500 years ago</td>
                </tr>
                <tr>
                    <td class="question-cell"><strong>Who painted this thangka and where?</strong></td>
                    <td class="primordial-rigden-col">Cynthia Moku in Boulder</td>
                    <td class="vajradhara-col">Sherab Palden Beru in Boulder</td>
                    <td class="shakyamuni-col">Everyone, everywhere, in last 2,500 years</td>
                </tr>
                <tr>
                    <td class="question-cell"><strong>Who is expected to recognize this thangka the first time they enter the shrine room?</strong></td>
                    <td class="primordial-rigden-col">Students on the Shambhala path after 2010</td>
                    <td class="vajradhara-col">All those with some degree of familiarity with Tibetan Buddhism</td>
                    <td class="shakyamuni-col">Everyone</td>
                </tr>
                <tr>
                    <td class="question-cell"><strong>Does this thangka support visualizations practiced currently in the Shambhala community?</strong></td>
                    <td class="primordial-rigden-col">Supports practices taught to Shambhala ngondro, Werma, & Scorpion Seal students</td>
                    <td class="vajradhara-col">Is central to Kagyu ngondro practices; also appears in numerous Tibetan Buddhist practices</td>
                    <td class="shakyamuni-col">Shakyamuni Buddha figure supports all Buddhist practice</td>
                </tr>
                <tr>
                    <td class="question-cell"><strong>Roughly estimated cost of installation</strong></td>
                    <td class="primordial-rigden-col">No cost</td>
                    <td class="vajradhara-col">$1,000 to $3,000 to move Vajradhara to main shrine and Primordial Rigden to north wall</td>
                    <td class="shakyamuni-col">$1,000 to $4,000 if an existing thangka is donated; up to $22,000 if commissioned (including shipping, and re-installation of Primordial Rigden on north wall)</td>
                </tr>
                <tr>
                    <td class="question-cell"><strong>When do we expect this thangka might be installed over the main shrine, if selected?</strong></td>
                    <td class="primordial-rigden-col">Immediately -- No change</td>
                    <td class="vajradhara-col">Within a couple of months</td>
                    <td class="shakyamuni-col">If available now - within a couple of months; if a thangka is commissioned - up to a year and a half</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- PRIMORDIAL RIGDEN Form -->
    <div class="form-container rigden" id="rigdenContainer">
        <h1>P R I M O R D I A L &nbsp; R I G D E N <span class="completion-status status-completed hidden" id="rigdenStatus">Completed</span></h1>
        
        <form id="primordialRigdenForm">
            <div class="image-section">
                <div class="image-container">
                    <img src="primordialRigden.png" alt="PRIMORDIAL RIGDEN thangka" style="max-width: 100%; height: auto;">
                </div>
            </div>
            
            <div class="rating-section">
                <div class="read-more-link">
                    <a onclick="openModal('rigden')">Read more about this thangka's history and significance</a>
                </div>
                <h2>Rate PRIMORDIAL RIGDEN</h2>
                <div class="rating-grid">
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-0" name="rigden-rating" value="0">
                        <label for="primordialRigden-rating-0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-1" name="rigden-rating" value="1">
                        <label for="primordialRigden-rating-1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-2" name="rigden-rating" value="2">
                        <label for="primordialRigden-rating-2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-3" name="rigden-rating" value="3">
                        <label for="primordialRigden-rating-3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-4" name="rigden-rating" value="4">
                        <label for="primordialRigden-rating-4">4</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="primordialRigden-rating-5" name="rigden-rating" value="5">
                        <label for="primordialRigden-rating-5">5</label>
                    </div>
                </div>
                <div class="rating-description">
                    0 (Neutral) to 5 (Most Preferable)
                </div>
            </div>
            
            <div class="feedback-section">
                <h2>Feedback</h2>
                <textarea 
                    class="feedback-textarea" 
                    name="rigden-feedback"
                    placeholder="Optional: Share your thoughts about this thangka..."
                    rows="5"
                ></textarea>
            </div>
            
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit PRIMORDIAL RIGDEN Rating</button>
            </div>
        </form>
    </div>

    <!-- VAJRADHARA Form -->
    <div class="form-container vajradhara" id="vajradharaContainer">
        <h1>V A J R A D H A R A <span class="completion-status status-completed hidden" id="vajradharaStatus">Completed</span></h1>
        
        <form id="vajradharaForm">
            <div class="image-section">
                <div class="image-container">
                    <img src="vajradhara.png" alt="VAJRADHARA thangka" style="max-width: 100%; height: auto;">
                </div>
            </div>
            
            <div class="rating-section">
                <div class="read-more-link">
                    <a onclick="openModal('vajradhara')">Read more about this thangka's history and significance</a>
                </div>
                <h2>Rate VAJRADHARA</h2>
                <div class="rating-grid">
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-0" name="vajradhara-rating" value="0">
                        <label for="vajradhara-rating-0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-1" name="vajradhara-rating" value="1">
                        <label for="vajradhara-rating-1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-2" name="vajradhara-rating" value="2">
                        <label for="vajradhara-rating-2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-3" name="vajradhara-rating" value="3">
                        <label for="vajradhara-rating-3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-4" name="vajradhara-rating" value="4">
                        <label for="vajradhara-rating-4">4</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="vajradhara-rating-5" name="vajradhara-rating" value="5">
                        <label for="vajradhara-rating-5">5</label>
                    </div>
                </div>
                <div class="rating-description">
                    0 (Neutral) to 5 (Most Preferable)
                </div>
            </div>
            
            <div class="feedback-section">
                <h2>Feedback</h2>
                <textarea 
                    class="feedback-textarea" 
                    name="vajradhara-feedback"
                    placeholder="Optional: Share your thoughts about this thangka..."
                    rows="5"
                ></textarea>
            </div>
            
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit VAJRADHARA Rating</button>
            </div>
        </form>
    </div>

    <!-- SHAKYAMUNI Form -->
    <div class="form-container shakyamuni" id="shakyamuniContainer">
        <h1>S H A K Y A M U N I &nbsp; B U D D H A <span class="completion-status status-completed hidden" id="shakyamuniStatus">Completed</span></h1>
        
        <form id="shakyamuniForm">
            <div class="image-section">
                <div class="image-container">
                    <img src="shakyamuni-buddha.png" alt="SHAKYAMUNI BUDDHA thangka" style="max-width: 100%; height: auto;">
                </div>
            </div>
            
            <div class="rating-section">
                <div class="read-more-link">
                    <a onclick="openModal('shakyamuni')">Read more about this thangka's history and significance</a>
                </div>
                <h2>Rate SHAKYAMUNI BUDDHA</h2>
                <div class="rating-grid">
                    <div class="rating-option">
                        <input type="radio" id="shakyamuni-rating-0" name="shakyamuni-rating" value="0">
                        <label for="shakyamuni-rating-0">0</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="shakyamuni-rating-1" name="shakyamuni-rating" value="1">
                        <label for="shakyamuni-rating-1">1</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="shakyamuni-rating-2" name="shakyamuni-rating" value="2">
                        <label for="shakyamuni-rating-2">2</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="shakyamuni-rating-3" name="shakyamuni-rating" value="3">
                        <label for="shakyamuni-rating-3">3</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="shakyamuni-rating-4" name="shakyamuni-rating" value="4">
                        <label for="shakyamuni-rating-4">4</label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="shakyamuni-rating-5" name="shakyamuni-rating" value="5">
                        <label for="shakyamuni-rating-5">5</label>
                    </div>
                </div>
                <div class="rating-description">
                    0 (Neutral) to 5 (Most Preferable)
                </div>
            </div>
            
            <div class="feedback-section">
                <h2>Feedback</h2>
                <textarea 
                    class="feedback-textarea" 
                    name="shakyamuni-feedback"
                    placeholder="Optional: Share your thoughts about this thangka..."
                    rows="5"
                ></textarea>
            </div>
            
            <div class="submit-section">
                <button type="submit" class="submit-btn">Submit SHAKYAMUNI BUDDHA Rating</button>
            </div>
        </form>
    </div>

    <!-- Contact Information Section (Always Visible) -->
    <div class="contact-info-section">
        <h2>Contact Information (Optional)</h2>
        <p>If you'd like to share your name and contact information with your responses, please enter your details below. This information will be included with your survey submission.</p>
        
        <div class="contact-grid">
            <div class="contact-field">
                <label for="contactName">Name:</label>
                <input type="text" id="contactName" placeholder="Your name">
            </div>
            <div class="contact-field">
                <label for="contactEmail">Email:</label>
                <input type="email" id="contactEmail" placeholder="your.email@example.com">
            </div>
        </div>
    </div>

    <!-- Final Submit Section -->
    <div class="final-submit" id="finalSubmitSection">
        <h2>Complete Your Survey</h2>
        <p>You have completed all three ratings. Your contact information (if provided above) will be included with your submission.</p>
        <button type="button" class="final-submit-btn" id="finalSubmitBtn">Submit Complete Survey</button>
    </div>

    <!-- Thank You Page -->
    <div class="thank-you-page" id="thankYouPage">
        <h1 class="thank-you-title">Thank You!</h1>
        <p class="thank-you-subtitle">Your feedback has been successfully submitted</p>
        
        <div class="thank-you-message">
            <p>Your responses to the Boulder Shambhala Center MSR Thangka Survey have been recorded. Your feedback is valuable and will help inform important decisions about our meditation space.</p>
            <p style="margin-top: 30px;"><em>You may now close this page.</em></p>
        </div>
    </div>

    <!-- Modal for detailed thangka information -->
    <div id="thangkaModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle"></h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
            </div>
        </div>
    </div>

    <script>
        let completedForms = 0;
        const totalForms = 3;
        const surveyData = {};
        
        // Detailed thangka information
        const thangkaDetails = {
            preamble: {
                title: "About This Survey: Background and Process",
                content: `
                    <p>The choice of main shrine thangka is a sensitive topic for many, and it touches on the whole identity of Boulder Shambhala Center and lots of past karma. But it also a great opportunity to come together, share inspiration about the open future, acknowledge and perhaps relax our old grudges, collaborate, and appreciate our lineage which provided us this amazing blessed space for practice.</p>
                    
                    <p>The Boulder Shambhala Center Board and the Thangka Task Force feel that it is important to include all community voices, and some voices of people who use the shrine room but are not current Boulder Shambhala Center members. We envision a general process that is not a small-group caucus, nor really a conventional democratic vote, as it does provide space for "spontaneous insight" (a term used by Trungpa Rinpoche). We could consider not just our personal preference for which thangka we prefer to practice with, but what we think will help revitalize and sustain the sangha. Do keep in mind that when the community's best choice surfaces, there may be still be logistical, technical, or financial factors that influence the ability to install it. The process will strive for transparency.</p>
                    
                    <p>The Thangka Task Force has developed four possible scenarios for the main shrine thangka. Every thangka choice being discussed is in essence the same, a representation of the awakened mind which is inherent in all of our beings, and its expression in the world as compassion. However, we as confused individuals do tend to get attached to the particular representation that is most familiar to us, or one that was introduced by our root guru. The image is often used as a focal point for meditation, devotion, and ritual.</p>
                    
                    <p>Below are brief write ups addressing each choice. They were written to present some of the history and significance of each choice, and some of the competitive arguments that could come from someone who felt attached to each choice. However, authors of the first drafts about a particular thangka don't even necessarily feel that thangka is still their first choice. The more that Thangka Task Force members worked with these, the less we felt attached to any particular result, and the more general appreciation we felt for our practice space and our path together.</p>
                `
            },
            rigden: {
                title: "Primordial Rigden Thangka",
                content: `
                    <p>The Primordial Rigden embodies inherent basic goodness, combining Buddhist and Shambhala teachings to guide practitioners toward awakenment and compassion. Currently as a community, we receive blessings and teachings from a variety of teachers and internet seminars. Yet the Primordial Rigden remains as the image that binds us to the global Shambhala community. Further, it's our unique Mukpo heritage, and it defines us as a Shambhala practice center. Sakyong Mipham Rinpoche commissioned local thangka painter Cynthia Moku to paint it specifically for Boulder Shambhala Center's main shrine in 2010. For practitioners who have frequented Boulder Shambhala Center in the last 15 years, it may represent the essence of their meditation practice, serving to wake them up and open their hearts upon entering the shrine room.</p>
                    
                    <p>We cannot deny that the Rigden thangka has become a focus for the emotional pain of some students Trungpa Rinpoche who felt pushed out when Sakyong Mipham Rinpoche began to strongly favor Shambhala teachings and practices over traditional Buddhist teachings and practices. However, this presents an opportunity for healing and transformation. The thangka, with its profound symbolism, invites us to confront the complexities of our shared history: the triumphs, the wounds, and the moments of disillusionment. It challenges us to hold space for all of it, to see beyond individual eras or leaders, and to rediscover the essence that underpins our community—confidence in basic goodness and the vision of enlightened society. As we navigate this new chapter in Shambhala's journey, the image can serve as a bridge, connecting us to the lineage's teachings while inspiring us to evolve into a more inclusive and resilient community.</p>
                `
            },
            vajradhara: {
                title: "Buddha Vajradhara Thangka",
                content: `
                    <p>In this transitional time for the Boulder Shambhala Center, we have a wonderful opportunity to help heal our sangha and convincingly demonstrate the center's commitment to embracing Kagyu practices alongside the Shambhala practices: by returning the great Buddha Vajradhara thangka to Boulder Shambhala Center's main shrine room. This 6' x 6' representation of the Buddha's vast awake mind was commissioned by the Vidyadhara Chogyam Trungpa Rinpoche in 1979 and was painted in Boulder by master thangka painter Sherab Palden Beru. It was blessed by the Vidyadhara with calligraphed syllables, and by the 16th Karmapa with gold leaf handprints and his signature.</p>
                    
                    <p>Many of Trungpa Rinpoche's students found their awareness and devotion intensified in the presence of this thangka, which was the main image that inspired their extended Kagyu ngondro practices and was also included in Kagyu sadhana practices. It also served as the main shrine room's Buddha representation for about three decades of daily meditation and nyinthuns, and as the backdrop for penetrating teachings for countless hours by Trungpa Rinpoche, by many other realized Buddhist teachers of our time, and later by Sakyong Mipham Rinpoche. In 2010, following Sakyong Mipham Rinpoche's wishes, the Vajradhara thangka was removed and replaced by the new Primordial Rigden Thangka.</p>
                    
                    <p>The Vajradhara thangka was taken to Shambhala Mountain Center and installed above and inside the front door of the Great Stupa of Dharmakaya at Drala Mountain Center. It contributes to the blessings-soaked atmosphere of the room, but no longer serves as a specific focus for individuals' practice.</p>
                    
                    <p>Volunteers are willing to transport the thangka back "home" to Boulder Shambhala Center, if the move is agreed on by the sangha. To return the thangka to Boulder's main shrine room would be a potent invitation to Trungpa Rinpoche's old students and to newer students of traditional Buddhism to "come home". It could also help attract visiting Buddhist teachers to give more well-attended teachings and large abhishekas in Boulder's spacious main shrine room.</p>
                    
                    <p>The main shrine room is long and versatile. Boulder Shambhala Center's staff and volunteers believe that the Primordial Rigden thangka could be moved to the north wall of the shrine room, where the Gesar mask currently hangs, and a valence and lighting and low small offering table could be installed there. Thus, returning the Vajradhara thangka to its original location should not give anyone cause to feel left behind. The Rigden and the energy of Shambhala would not be removed, but one thangka would be moved so that the shrine room would once again include a central Buddha representation from the Kagyu vajrayana tradition. Cushions can easily be moved to face the appropriate thangka whenever there is a schedule transition between a Shambhala program, a traditional Buddhist program, or a Sadhana of Mahamudra practice.</p>
                    
                    <h3>Such a change would have many benefits:</h3>
                    <p>Revered visiting Buddhist teachers would be able to teach in an environment that is familiar to them and more aligned with the content of their teaching or abhisheka. (In recent years most of the well-attended programs at Boulder Shambhala Center have been the programs that are led by Buddhist teachers.)</p>
                    
                    <p>The great blessed Vajradhara thangka would support visualizations that are central to Boulder Shambhala Center's active Kagyu ngondro practice and that are part of many subsequent sadhana practices, in the same way that it supported Kagyu ngondro practice and other vajrayana practices for Trungpa Rinpoche's students in 1979 through 2010.</p>
                    
                    <p>Students of the Vidyadhara who have not been practicing at the Boulder Shambhala Center in the last 15 years might return for more practices and teachings (in addition to the numerous funeral services that they attend there). If Boulder Shambhala Center can help heal old family wounds and welcome the aging students in this current sangha transition, there will be great karmic benefits, and the fragile base of financial support for preserving the fortress of the Mukpo lineage might be extended.</p>
                `
            },
            shakyamuni: {
                title: "Shakyamuni Buddha Thangka (particular image yet to be identified)",
                content: `
                    <p>The image of Shakyamuni Buddha symbolizes the Buddha as an ordinary human, his attainment of Buddhahood and his teachings on the path to liberation. Gautama Buddha, the historical Buddha, is a universal symbol of the embodiment of spiritual wisdom, compassion, and enlightenment. In contemporary culture, the Buddha's image is often a secular symbol and seen in peoples' gardens, porches and homes as a representation of peace, equanimity and universal compassion.</p>
                    
                    <p>New students walking into the Boulder Shambhala Center main shrine room might find an image of Gautama Buddha familiar and less esoteric, or less alien, than the blue Vajradhara Buddha or the Primordial Rigden. They might feel it less arcane, not so much a representation of a specific sect or even a mysterious sect. A commissioned Sakyamuni Buddha thangka could possibly include smaller images of Vajradhara, Samatabhadra, a Rigden, and Prajnaparamita above the main image of the Buddha. Or, smaller statues of any of these could be placed on the shrine along with the crystal ball.</p>
                    
                    <p>While ethnic Tibetan Buddhists may feel connected to the Vajradhara thangka, a Shakyamuni thangka would be welcoming to all Buddhists: Thai, Japanese, Vietnamese, German, Chinese, Indian, Australian, Cambodian, and on and on. Any of these groups might wish to visit and offer devotion to this large image/shrine of Buddha here on the Front Range, especially if a prominent photo of it were included in the Boulder Shambhala Center website. Upon entering the building, they could see the other riches that Boulder Shambhala Center has to offer.</p>
                `
            }
        };
        
        // Modal functions
        function openModal(thangkaType) {
            const modal = document.getElementById('thangkaModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            const details = thangkaDetails[thangkaType];
            if (details) {
                modalTitle.textContent = details.title;
                modalBody.innerHTML = details.content;
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            const modal = document.getElementById('thangkaModal');
            modal.classList.remove('show');
            document.body.style.overflow = '';
        }
        
        // Close modal when clicking outside of it
        window.addEventListener('click', function(event) {
            const modal = document.getElementById('thangkaModal');
            if (event.target === modal) {
                closeModal();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
        
        // Generate unique submission ID
        function generateSubmissionID() {
            const timestamp = Date.now().toString(36);
            const randomStr = Math.random().toString(36).substring(2, 8);
            return `TSR-${timestamp}-${randomStr}`.toUpperCase();
        }
        
        // Store submission data to localStorage for admin page
        function storeSubmissionData(submissionId, data) {
            const submissionData = {
                id: submissionId,
                timestamp: new Date().toISOString(),
                responses: data
            };
            
            // Get existing submissions or initialize empty array
            const existingSubmissions = localStorage.getItem('all_thangka_submissions');
            let allSubmissions = existingSubmissions ? JSON.parse(existingSubmissions) : [];
            
            // Add new submission
            allSubmissions.push(submissionData);
            
            // Save back to localStorage
            localStorage.setItem('all_thangka_submissions', JSON.stringify(allSubmissions));
            
            console.log('Submission stored:', submissionData);
            console.log('Total submissions now:', allSubmissions.length);
            
            return submissionData;
        }

        // Toast notification
        function showToast(message, type = 'success') {
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span style="margin-right: 10px;">${type === 'error' ? '⚠' : '✅'}</span>${message}`;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
        });

        function setupEventListeners() {
            // Individual form submissions
            document.getElementById('primordialRigdenForm').addEventListener('submit', function(e) {
                handleFormSubmit(e, 'PRIMORDIAL RIGDEN', 'rigden');
            });
            
            document.getElementById('vajradharaForm').addEventListener('submit', function(e) {
                handleFormSubmit(e, 'VAJRADHARA', 'vajradhara');
            });

            document.getElementById('shakyamuniForm').addEventListener('submit', function(e) {
                handleFormSubmit(e, 'SHAKYAMUNI BUDDHA', 'shakyamuni');
            });

            // Final submission
            document.getElementById('finalSubmitBtn').addEventListener('click', handleFinalSubmit);
        }

        function handleFormSubmit(e, formName, formId) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const rating = formData.get(formId + '-rating');
            const feedback = formData.get(formId + '-feedback') || 'No feedback provided';
            
            if (!rating) {
                showToast(`Please select a rating for ${formName}`, 'error');
                return;
            }
            
            // Store the data
            surveyData[formId] = {
                name: formName,
                rating: rating,
                feedback: feedback
            };
            
            // Mark form as completed
            markFormCompleted(formId);
            
            // Show success message
            showToast(`${formName} rating submitted!`);
            
            // Update progress
            updateProgress();
        }

        function markFormCompleted(formId) {
            const container = document.getElementById(formId + 'Container');
            const status = document.getElementById(formId + 'Status');
            
            if (!container || !status) {
                console.error('Could not find elements for:', formId);
                return;
            }
            
            const submitBtn = container.querySelector('.submit-btn');
            
            if (!submitBtn) {
                console.error('Could not find submit button for:', formId);
                return;
            }
            
            container.classList.add('completed');
            status.classList.remove('hidden');
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitted ✓';
            
            completedForms++;
        }

        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const percentage = (completedForms / totalForms) * 100;
            
            progressFill.style.width = percentage + '%';
            
            if (completedForms === totalForms) {
                document.getElementById('finalSubmitSection').classList.add('show');
                setTimeout(() => {
                    showToast('All ratings complete! Review your contact info and submit when ready.', 'celebration');
                }, 500);
            }
        }

        function handleFinalSubmit() {
            if (completedForms !== totalForms) {
                showToast('Please complete all three ratings first.', 'error');
                return;
            }
            
            // Collect contact info
            const contactData = {
                name: document.getElementById('contactName').value.trim() || 'Not provided',
                email: document.getElementById('contactEmail').value.trim() || 'Not provided'
            };
            
            // Add contact info to survey data
            surveyData.contact = contactData;
            
            // Generate submission ID (for admin tracking only)
            const submissionId = generateSubmissionID();
            
            // Store the complete submission
            storeSubmissionData(submissionId, surveyData);
            
            // Hide all survey content
            document.getElementById('surveyHeader').classList.add('hidden');
            document.querySelector('.comparison-chart').classList.add('hidden');
            document.querySelector('.instructions-box').classList.add('hidden');
            document.getElementById('rigdenContainer').classList.add('hidden');
            document.getElementById('vajradharaContainer').classList.add('hidden');
            document.getElementById('shakyamuniContainer').classList.add('hidden');
            document.querySelector('.contact-info-section').classList.add('hidden');
            document.getElementById('finalSubmitSection').classList.add('hidden');
            
            // Show thank you page
            document.getElementById('thankYouPage').classList.add('show');
            
            // Scroll to top
            window.scrollTo(0, 0);
            
            // Show success toast
            showToast('Survey submitted successfully! Thank you for your participation.', 'celebration');
            
            console.log('Survey completed! Data:', surveyData);
            console.log('Submission ID (admin only):', submissionId);
        }
    </script>
</body>
</html>
